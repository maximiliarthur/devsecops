---
name: scan-secret
description: scan secrets in code repository

runs:
  using: composite
  steps:
    - name: run scan-secret
      run: |

        # ls -la /
        
        # docker build -t zricethezav/gitleaks:latest \
        # -f "$(pwd)/actions/scan-secret/Dockerfile" "$(pwd)/actions/scan-secret"


        docker run -v $(pwd):/path zricethezav/gitleaks:latest detect -c "/path/actions/scan-secret/gitleaks.toml" -s "/path" --no-git -r "/path/output.json" ---exit-code 0

      shell: bash